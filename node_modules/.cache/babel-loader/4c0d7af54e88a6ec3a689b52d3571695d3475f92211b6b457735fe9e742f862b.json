{"ast":null,"code":"import _slicedToArray from\"/Users/ziansari/Code/drs-frontend-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from\"react\";import'../css/App.css';import BarChart from'../components/BarChart';import LineChart from'../components/LineChart';import PieChart from'../components/PieChart';import DoughnutChart from'../components/DoughnutChart';import{JobData}from'../stubs/DRS_job_status';import{Link}from'react-router-dom';import{AppContext}from'../App';import{useQuery,gql}from'@apollo/client';import{LOAD_SYSTEMSUMMARY}from'../GraphQL/Queries';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SystemSummary(){/* const [mydata, setMydata] = JobData.map((element) => element.data.jobsBySystem) */var _useContext=useContext(AppContext),setSystemName=_useContext.setSystemName,setSelectedSystem=_useContext.setSelectedSystem;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),newSystemName=_useState2[0],setNewSystemName=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),systemSummaryResponse=_useState4[0],setSystemSummaryResponse=_useState4[1];var _useQuery=useQuery(LOAD_SYSTEMSUMMARY),error=_useQuery.error,loading=_useQuery.loading,data=_useQuery.data;useEffect(function(){if(data){setSystemSummaryResponse(data.systemSummary);}else{setSystemSummaryResponse(JobData.map(function(element){return element.data.jobsBySystem;}));}},[data]);function PopulateChart(props){var _useState5=useState({labels:['Completed','Pending'],datasets:[{label:props.label,data:[props.data.completedJobs,props.data.pendingJobs],backgroundColor:['Green','Orange']}]}),_useState6=_slicedToArray(_useState5,2),jobStatusData=_useState6[0],setJobStatusData=_useState6[1];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PieChart,{chartData:jobStatusData}),\"  \"]});}return/*#__PURE__*/_jsx(\"div\",{className:\"page-contain\",children:systemSummaryResponse.map(function(item){return/*#__PURE__*/_jsxs(Link,{to:\"/jobsummary\",className:\"data-card\",onClick:function onClick(){return setSystemName(item.systemName);},children:[\" \",/*#__PURE__*/_jsx(PopulateChart,{data:item,label:item.systemName}),\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"link-text\",children:[\" \",item.systemName,\" \"]})]});})});}export default SystemSummary;","map":{"version":3,"names":["useState","useContext","useEffect","BarChart","LineChart","PieChart","DoughnutChart","JobData","Link","AppContext","useQuery","gql","LOAD_SYSTEMSUMMARY","SystemSummary","setSystemName","setSelectedSystem","newSystemName","setNewSystemName","systemSummaryResponse","setSystemSummaryResponse","error","loading","data","systemSummary","map","element","jobsBySystem","PopulateChart","props","labels","datasets","label","completedJobs","pendingJobs","backgroundColor","jobStatusData","setJobStatusData","item","systemName"],"sources":["/Users/ziansari/Code/drs-frontend-app/src/pages/SystemSummary.js"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\nimport '../css/App.css';\nimport BarChart from '../components/BarChart';\nimport LineChart from '../components/LineChart';\nimport PieChart from '../components/PieChart';\nimport DoughnutChart from '../components/DoughnutChart';\nimport { JobData } from '../stubs/DRS_job_status';\nimport { Link } from 'react-router-dom';\nimport { AppContext } from '../App';\nimport { useQuery, gql } from '@apollo/client';\nimport { LOAD_SYSTEMSUMMARY } from '../GraphQL/Queries';\n\nfunction SystemSummary() {\n\n\n  /* const [mydata, setMydata] = JobData.map((element) => element.data.jobsBySystem) */\n  const { setSystemName,setSelectedSystem } = useContext(AppContext);\n  \n  \n  const [newSystemName, setNewSystemName] = useState(\"\");\n\n  const [systemSummaryResponse, setSystemSummaryResponse] = useState([]);\n\n  const { error, loading, data } = useQuery(LOAD_SYSTEMSUMMARY);\n  useEffect(() => {\n    if(data){\n    setSystemSummaryResponse(data.systemSummary);\n  }\n  else {\n    setSystemSummaryResponse(JobData.map((element) => element.data.jobsBySystem));\n  }\n\n  }, [data])\n\n  function PopulateChart(props) {\n    const [jobStatusData, setJobStatusData] = useState(\n\n      {\n        labels: ['Completed', 'Pending'],\n        datasets: [{\n          label: props.label,\n          data: [props.data.completedJobs, props.data.pendingJobs],\n          backgroundColor: [\n            'Green',\n            'Orange'\n\n          ]\n        }]\n      }\n    )\n\n    return (\n      <div ><PieChart chartData={jobStatusData} />  </div>\n    )\n  }\n\n  return (\n    <div className=\"page-contain\">\n\n      {systemSummaryResponse.map((item) =>\n        <Link to='/jobsummary' className='data-card' onClick={() => setSystemName(item.systemName)} > < PopulateChart data={item} label={item.systemName} /> <span className=\"link-text\"    > {item.systemName} </span></Link>\n      )}\n    </div>\n  );\n}\n\nexport default SystemSummary;"],"mappings":"2HAAA,OAASA,QAAQ,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CACvD,MAAO,gBAAgB,CACvB,MAAOC,SAAQ,KAAM,wBAAwB,CAC7C,MAAOC,UAAS,KAAM,yBAAyB,CAC/C,MAAOC,SAAQ,KAAM,wBAAwB,CAC7C,MAAOC,cAAa,KAAM,6BAA6B,CACvD,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,UAAU,KAAQ,QAAQ,CACnC,OAASC,QAAQ,CAAEC,GAAG,KAAQ,gBAAgB,CAC9C,OAASC,kBAAkB,KAAQ,oBAAoB,CAAC,wFAExD,QAASC,cAAa,EAAG,CAGvB,qFACA,gBAA4CZ,UAAU,CAACQ,UAAU,CAAC,CAA1DK,aAAa,aAAbA,aAAa,CAACC,iBAAiB,aAAjBA,iBAAiB,CAGvC,cAA0Cf,QAAQ,CAAC,EAAE,CAAC,wCAA/CgB,aAAa,eAAEC,gBAAgB,eAEtC,eAA0DjB,QAAQ,CAAC,EAAE,CAAC,yCAA/DkB,qBAAqB,eAAEC,wBAAwB,eAEtD,cAAiCT,QAAQ,CAACE,kBAAkB,CAAC,CAArDQ,KAAK,WAALA,KAAK,CAAEC,OAAO,WAAPA,OAAO,CAAEC,IAAI,WAAJA,IAAI,CAC5BpB,SAAS,CAAC,UAAM,CACd,GAAGoB,IAAI,CAAC,CACRH,wBAAwB,CAACG,IAAI,CAACC,aAAa,CAAC,CAC9C,CAAC,IACI,CACHJ,wBAAwB,CAACZ,OAAO,CAACiB,GAAG,CAAC,SAACC,OAAO,QAAKA,QAAO,CAACH,IAAI,CAACI,YAAY,GAAC,CAAC,CAC/E,CAEA,CAAC,CAAE,CAACJ,IAAI,CAAC,CAAC,CAEV,QAASK,cAAa,CAACC,KAAK,CAAE,CAC5B,eAA0C5B,QAAQ,CAEhD,CACE6B,MAAM,CAAE,CAAC,WAAW,CAAE,SAAS,CAAC,CAChCC,QAAQ,CAAE,CAAC,CACTC,KAAK,CAAEH,KAAK,CAACG,KAAK,CAClBT,IAAI,CAAE,CAACM,KAAK,CAACN,IAAI,CAACU,aAAa,CAAEJ,KAAK,CAACN,IAAI,CAACW,WAAW,CAAC,CACxDC,eAAe,CAAE,CACf,OAAO,CACP,QAAQ,CAGZ,CAAC,CACH,CAAC,CACF,yCAdMC,aAAa,eAAEC,gBAAgB,eAgBtC,mBACE,oCAAM,KAAC,QAAQ,EAAC,SAAS,CAAED,aAAc,EAAG,QAAQ,CAExD,CAEA,mBACE,YAAK,SAAS,CAAC,cAAc,UAE1BjB,qBAAqB,CAACM,GAAG,CAAC,SAACa,IAAI,qBAC9B,MAAC,IAAI,EAAC,EAAE,CAAC,aAAa,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,CAAE,yBAAMvB,cAAa,CAACuB,IAAI,CAACC,UAAU,CAAC,EAAC,4BAAG,KAAE,aAAa,EAAC,IAAI,CAAED,IAAK,CAAC,KAAK,CAAEA,IAAI,CAACC,UAAW,EAAG,kBAAC,cAAM,SAAS,CAAC,WAAW,eAAOD,IAAI,CAACC,UAAU,OAAS,GAAO,GACvN,EACG,CAEV,CAEA,cAAezB,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}